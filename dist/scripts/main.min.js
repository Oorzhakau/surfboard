"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var myMap,openItem=function(e){var e=e.closest(".team__item"),t=e.find(".team__content"),n=t.find(".team__content-block"),a=e.find(".team__title"),n=n.height();e.addClass("active"),t.height(n),a.addClass("active")},closeEveryItem=function(e){var t=e.find(".team__content"),n=e.find(".team__item"),e=e.find(".team__title");n.removeClass("active"),t.height(0),e.removeClass("active")},init=($(".team__title").click(function(e){var e=$(e.currentTarget),t=e.closest(".team");e.closest(".team__item").hasClass("active")?closeEveryItem(t):(closeEveryItem(t),openItem(e))}),!function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function(le){function a(A,s){function e(e){if(!(!0===C.data(Pe+"_intouch")||0<le(e.target).closest(s.excludedElements,C).length)){var t,n,a,i=e.originalEvent||e;if(!i.pointerType||"mouse"!=i.pointerType||0!=s.fallbackToMouseEvents)return a=(n=i.touches)?n[0]:i,$=Ee,n?M=n.length:!1!==s.preventDefaultEvents&&e.preventDefault(),E=w=y=null,x=1,S=_=T=b=m=0,(e={})[se]=l(se),e[ue]=l(ue),e[ce]=l(ce),e[de]=l(de),k=e,Z(),p(0,a),!n||M===s.fingers||s.fingers===xe||c()?(re=f(),2==M&&(p(1,n[1]),T=_=te(D[0].start,D[1].start)),(s.swipeStatus||s.pinchStatus)&&(t=u(i,$))):t=!1,!1===t?(u(i,$=$e),t):(s.hold&&(R=setTimeout(le.proxy(function(){C.trigger("hold",[i.target]),s.hold&&(t=s.hold.call(C,i,i.target))},this),s.longTapThreshold)),o(!0),null)}}function t(e){var t=e.originalEvent||e;if($!==Ce&&$!==$e&&!d()){var n,a=t.touches,i=J(a?a[0]:t);if(O=f(),a&&(M=a.length),s.hold&&clearTimeout(R),$=ke,2==M&&(0==T?(p(1,a[1]),T=_=te(D[0].start,D[1].start)):(J(a[1]),_=te(D[0].end,D[1].end),D[0].end,D[1].end,E=x<1?fe:pe),x=(_/T*1).toFixed(2),S=Math.abs(T-_)),M===s.fingers||s.fingers===xe||!a||c()){y=ne(i.start,i.end),w=ne(i.last,i.end);var r,o=e,a=w;if(!1!==s.preventDefaultEvents)if(s.allowPageScroll===he)o.preventDefault();else{var l=s.allowPageScroll===ge;switch(a){case se:(s.swipeLeft&&l||!l&&s.allowPageScroll!=Te)&&o.preventDefault();break;case ue:(s.swipeRight&&l||!l&&s.allowPageScroll!=Te)&&o.preventDefault();break;case ce:(s.swipeUp&&l||!l&&s.allowPageScroll!=_e)&&o.preventDefault();break;case de:(s.swipeDown&&l||!l&&s.allowPageScroll!=_e)&&o.preventDefault()}}e=i.start,a=i.end,m=Math.round(Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))),b=ee(),a=m,(e=y)!=he&&(a=Math.max(a,K(e)),k[e].distance=a),n=u(t,$),s.triggerOnTouchEnd&&!s.triggerOnTouchLeave||(e=!0,s.triggerOnTouchLeave&&(r={left:(r=(a=le(a=this)).offset()).left,right:r.left+a.outerWidth(),top:r.top,bottom:r.top+a.outerHeight()},a=i.end,i=r,e=a.x>i.left&&a.x<i.right&&a.y>i.top&&a.y<i.bottom),!s.triggerOnTouchEnd&&e?$=q(ke):s.triggerOnTouchLeave&&!e&&($=q(Ce)),$!=$e&&$!=Ce)||u(t,$)}else u(t,$=$e);!1===n&&u(t,$=$e)}}function n(e){var t,n=e.originalEvent||e,a=n.touches;if(a){if(a.length&&!d())return t=n,P=f(),oe=t.touches.length+1,!0;if(a.length&&d())return!0}return d()&&(M=oe),O=f(),b=ee(),H()||!U()?u(n,$=$e):s.triggerOnTouchEnd||!1===s.triggerOnTouchEnd&&$===ke?(!1!==s.preventDefaultEvents&&e.preventDefault(),u(n,$=Ce)):!s.triggerOnTouchEnd&&W()?r(n,$=Ce,ye):$===ke&&u(n,$=$e),o(!1),null}function i(){_=T=re=O=M=0,Z(),o(!(x=1))}function N(e){e=e.originalEvent||e;s.triggerOnTouchLeave&&u(e,$=q(Ce))}function j(){C.unbind(h,e),C.unbind(v,i),C.unbind(ae,t),C.unbind(ie,n),g&&C.unbind(g,N),o(!1)}function q(e){var t=e,n=Y(),a=U(),i=H();return!n||i?t=$e:!a||e!=ke||s.triggerOnTouchEnd&&!s.triggerOnTouchLeave?!a&&e==Ce&&s.triggerOnTouchLeave&&(t=$e):t=Ce,t}function u(e,t){var n,a=e.touches;return(F()&&Q()||Q())&&(n=r(e,t,ve)),(V()&&c()||c())&&!1!==n&&(n=r(e,t,me)),G()&&z()&&!1!==n?n=r(e,t,we):b>s.longTapThreshold&&m<Se&&s.longTap&&!1!==n?n=r(e,t,be):1!==M&&Me||!(isNaN(m)||m<s.threshold)||!W()||!1===n||(n=r(e,t,ye)),t===$e&&i(),t!==Ce||a&&a.length||i(),n}function r(e,t,n){var a;if(n==ve){if(C.trigger("swipeStatus",[t,y||null,m||0,b||0,M,D,w]),s.swipeStatus&&!1===(a=s.swipeStatus.call(C,e,t,y||null,m||0,b||0,M,D,w)))return!1;if(t==Ce&&F()){if(clearTimeout(L),clearTimeout(R),C.trigger("swipe",[y,m,b,M,D,w]),s.swipe&&!1===(a=s.swipe.call(C,e,y,m,b,M,D,w)))return!1;switch(y){case se:C.trigger("swipeLeft",[y,m,b,M,D,w]),s.swipeLeft&&(a=s.swipeLeft.call(C,e,y,m,b,M,D,w));break;case ue:C.trigger("swipeRight",[y,m,b,M,D,w]),s.swipeRight&&(a=s.swipeRight.call(C,e,y,m,b,M,D,w));break;case ce:C.trigger("swipeUp",[y,m,b,M,D,w]),s.swipeUp&&(a=s.swipeUp.call(C,e,y,m,b,M,D,w));break;case de:C.trigger("swipeDown",[y,m,b,M,D,w]),s.swipeDown&&(a=s.swipeDown.call(C,e,y,m,b,M,D,w))}}}if(n==me){if(C.trigger("pinchStatus",[t,E||null,S||0,b||0,M,x,D]),s.pinchStatus&&!1===(a=s.pinchStatus.call(C,e,t,E||null,S||0,b||0,M,x,D)))return!1;if(t==Ce&&V())switch(E){case pe:C.trigger("pinchIn",[E||null,S||0,b||0,M,x,D]),s.pinchIn&&(a=s.pinchIn.call(C,e,E||null,S||0,b||0,M,x,D));break;case fe:C.trigger("pinchOut",[E||null,S||0,b||0,M,x,D]),s.pinchOut&&(a=s.pinchOut.call(C,e,E||null,S||0,b||0,M,x,D))}}return n==ye?t!==$e&&t!==Ce||(clearTimeout(L),clearTimeout(R),z()&&!G()?(I=f(),L=setTimeout(le.proxy(function(){I=null,C.trigger("tap",[e.target]),s.tap&&(a=s.tap.call(C,e,e.target))},this),s.doubleTapThreshold)):(I=null,C.trigger("tap",[e.target]),s.tap&&(a=s.tap.call(C,e,e.target)))):n==we?t!==$e&&t!==Ce||(clearTimeout(L),clearTimeout(R),I=null,C.trigger("doubletap",[e.target]),s.doubleTap&&(a=s.doubleTap.call(C,e,e.target))):n!=be||t!==$e&&t!==Ce||(clearTimeout(L),I=null,C.trigger("longtap",[e.target]),s.longTap&&(a=s.longTap.call(C,e,e.target))),a}function U(){var e=!0;return e=null!==s.threshold?m>=s.threshold:e}function H(){var e=!1;return e=null!==s.cancelThreshold&&null!==y?K(y)-m>=s.cancelThreshold:e}function Y(){return!(s.maxTimeThreshold&&b>=s.maxTimeThreshold)}function V(){var e=X(),t=B(),n=null===s.pinchThreshold||S>=s.pinchThreshold;return e&&t&&n}function c(){return s.pinchStatus||s.pinchIn||s.pinchOut}function F(){var e=Y(),t=U(),n=X(),a=B();return!H()&&a&&n&&t&&e}function Q(){return s.swipe||s.swipeStatus||s.swipeLeft||s.swipeRight||s.swipeUp||s.swipeDown}function X(){return M===s.fingers||s.fingers===xe||!Me}function B(){return 0!==D[0].end.x}function W(){return s.tap}function z(){return!!s.doubleTap}function G(){var e;return null!=I&&(e=f(),z())&&e-I<=s.doubleTapThreshold}function Z(){oe=P=0}function d(){var e=!1;return e=P&&f()-P<=s.fingerReleaseThreshold?!0:e}function o(e){C&&(!0===e?(C.bind(ae,t),C.bind(ie,n),g&&C.bind(g,N)):(C.unbind(ae,t,!1),C.unbind(ie,n,!1),g&&C.unbind(g,N,!1)),C.data(Pe+"_intouch",!0===e))}function p(e,t){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=t.pageX||t.clientX,n.start.y=n.last.y=n.end.y=t.pageY||t.clientY,D[e]=n}function J(e){var t=void 0!==e.identifier?e.identifier:0,n=D[t]||null;return(n=null===n?p(t,e):n).last.x=n.end.x,n.last.y=n.end.y,n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function K(e){if(k[e])return k[e].distance}function l(e){return{direction:e,distance:0}}function ee(){return O-re}function te(e,t){var n=Math.abs(e.x-t.x),e=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+e*e))}function ne(e,t){var n,a;return n=t,(a=e).x==n.x&&a.y==n.y?he:(a=t,t=(n=e).x-a.x,a=a.y-e.y,n=Math.atan2(a,t),a=(a=Math.round(180*n/Math.PI))<0?360-Math.abs(a):a,a<=45&&0<=a||a<=360&&315<=a?se:135<=a&&a<=225?ue:45<a&&a<135?de:ce)}function f(){return(new Date).getTime()}var s=le.extend({},s),a=Me||Oe||!s.fallbackToMouseEvents,h=a?Oe?De?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ae=a?Oe?De?"MSPointerMove":"pointermove":"touchmove":"mousemove",ie=a?Oe?De?"MSPointerUp":"pointerup":"touchend":"mouseup",g=!a||Oe?"mouseleave":null,v=Oe?De?"MSPointerCancel":"pointercancel":"touchcancel",m=0,y=null,w=null,b=0,T=0,_=0,x=1,S=0,E=0,k=null,C=le(A),$="start",M=0,D={},re=0,O=0,P=0,oe=0,I=0,L=null,R=null;try{C.bind(h,e),C.bind(v,i)}catch(e){le.error("events not supported "+h+","+v+" on jQuery.swipe")}this.enable=function(){return this.disable(),C.bind(h,e),C.bind(v,i),C},this.disable=function(){return j(),C},this.destroy=function(){j(),C.data(Pe,null),C=null},this.option=function(e,t){if("object"==_typeof(e))s=le.extend(s,e);else if(void 0!==s[e]){if(void 0===t)return s[e];s[e]=t}else{if(!e)return s;le.error("Option "+e+" does not exist on jQuery.swipe.options")}return null}}var se="left",ue="right",ce="up",de="down",pe="in",fe="out",he="none",ge="auto",ve="swipe",me="pinch",ye="tap",we="doubletap",be="longtap",Te="horizontal",_e="vertical",xe="all",Se=10,Ee="start",ke="move",Ce="end",$e="cancel",Me="ontouchstart"in window,De=window.navigator.msPointerEnabled&&!window.PointerEvent&&!Me,Oe=(window.PointerEvent||window.navigator.msPointerEnabled)&&!Me,Pe="TouchSwipe";le.fn.swipe=function(e){var t=le(this),n=t.data(Pe);if(n&&"string"==typeof e){if(n[e])return n[e].apply(n,Array.prototype.slice.call(arguments,1));le.error("Method "+e+" does not exist on jQuery.swipe")}else if(n&&"object"==_typeof(e))n.option.apply(n,arguments);else if(!(n||"object"!=_typeof(e)&&e))return function(n){return!n||void 0!==n.allowPageScroll||void 0===n.swipe&&void 0===n.swipeStatus||(n.allowPageScroll=he),void 0!==n.click&&void 0===n.tap&&(n.tap=n.click),n=n||{},n=le.extend({},le.fn.swipe.defaults,n),this.each(function(){var e,t=le(this);t.data(Pe)||(e=new a(this,n),t.data(Pe,e))})}.apply(this,arguments);return t},le.fn.swipe.version="1.6.18",le.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},le.fn.swipe.phases={PHASE_START:Ee,PHASE_MOVE:ke,PHASE_END:Ce,PHASE_CANCEL:$e},le.fn.swipe.directions={LEFT:se,RIGHT:ue,UP:ce,DOWN:de,IN:pe,OUT:fe},le.fn.swipe.pageScroll={NONE:he,HORIZONTAL:Te,VERTICAL:_e,AUTO:ge},le.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:xe}}),function(){myMap=new ymaps.Map("map",{center:[55.752,37.576],zoom:14,controls:[]});var t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icons/map-marker.svg",iconImageSize:[46,57],iconImageOffSet:[-35,-52]});[[55.752004,37.576133]].forEach(function(e){t.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(t),myMap.behaviors.disable("scrollZoom")}),overlay=(ymaps.ready(init),!function(){function a(e){var t=e.find(".products-menu__item"),e=e.find(".products-menu__content");t.removeClass("active"),e.width(0)}function i(e){var t,n,a,i,r=e.find(".products-menu__content"),o=e.find(".products-menu__container"),l=(t=e,n=0,l=$(window).width(),a=(a=t.closest(".products-menu__list").find(".products-menu__title")).width()*a.length,t=t.find(".products-menu__container"),i=parseInt(t.css("padding-left")),t=parseInt(t.css("padding-right")),{container:n=window.matchMedia("(max-width: 768px)").matches?l-a:500,textContainer:n-t-i});e.addClass("active"),r.width(l.container),o.width(l.textContainer)}$(".products-menu__title").on("click",function(e){e.preventDefault();var e=$(e.currentTarget),t=e.closest(".products-menu__item"),n=t.hasClass("active"),e=e.closest(".products-menu__list");n?a(e):(a(e),i(t))})}(),document.querySelector(".overlay")),hamburger=document.querySelector(".hamburger"),body=document.body,links=document.querySelectorAll(".overlay .menu__link");function toggleMenu(e){e.preventDefault(),overlay.classList.toggle("overlay--active"),hamburger.classList.toggle("hamburger--active"),hamburger.classList.toggle("body--active-menu")}links.forEach(function(e){e.addEventListener("click",toggleMenu)}),hamburger.addEventListener("click",toggleMenu);var player,validateForms=function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length},fixedMenu=$(".fixed-menu"),btnReset=$(".btn-reset"),playerContainer=($(".form").submit(function(e){e.preventDefault();var t=$(e.currentTarget),e=t.find("[name='name']"),n=t.find("[name='phone']"),a=t.find("[name='comment']"),i=t.find("[name='to']"),r=$("#modal"),o=r.find(".modal__content");r.removeClass("error-modal"),validateForms(t,[e,n,a,i])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:e.val(),phone:n.val(),comment:a.val(),to:i.val()}})).done(function(e){o.text(e.message),t[0].reset()}),e.fail(function(e){e=e.responseJSON.message;o.text(e),r.addClass("error-modal")}),e.always(function(){$.fancybox.open({src:"#modal",type:"inline"}),fixedMenu.hide()}))}),$(".app-submit-btn").click(function(e){e.preventDefault(),$.fancybox.close(),fixedMenu.show(400)}),!function(){function a(e){var t;s||(s=!0,t=u(e),c(e),n.css({transform:"translateY(".concat(t,"%)")}),d(r,e,"active"),setTimeout(function(){s=!1,d(l,e,"fixed-menu__item--active")},1100))}function i(){var e=r.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&a(t.index())},prev:function(){n.length&&a(n.index())}}}var r=$("section"),n=$(".maincontent"),e=$(".fixed-menu"),o=$(".fixed-menu__link"),l=e.find(".fixed-menu__item"),e=new MobileDetect(window.navigator.userAgent).mobile(),s=!1,u=(r.first().addClass("active"),function(e){return isNaN(-100*e)?(console.error("sectionEq"),0):-100*e}),c=function(e){var t="fixed-menu__link--shadowed";"black"==r.eq(e).attr("data-sidemenu-theme")?o.addClass(t):o.removeClass(t)},d=function(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)};$(window).on("wheel",function(e){var e=e.originalEvent.deltaY,t=i();0<e&&t.next(),e<0&&t.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),t="input"==t||"textarea"==t,n=i();if(!t)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$(".wrapper").on("touchmove",function(e){e.preventDefault()}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));a(e.index())}),e&&$("body").swipe({swipe:function(e,t){i()["down"===t?"prev":"up"===t?"next":""]()}})}(),$(".player")),eventsInit=function(){$(".player__start").click(function(e){e.preventDefault(),playerContainer.hasClass("paused")?player.pauseVideo():player.playVideo()}),$(".player__playback").click(function(e){var t=$(e.currentTarget),e=e.originalEvent.layerX/t.width()*100,t=player.getDuration()/100*e;$(".player__playback-button").css({left:"".concat(e,"%")}),player.seekTo(t)}),$(".player__splash").click(function(e){player.playVideo()})},formatTime=function(e){var e=Math.round(e),t=n(Math.floor(e/60)),e=n(e-60*t);function n(e){return e<10?"0".concat(e):e}return"".concat(t,":").concat(e)},onPlayerReady=function(){var n=player.getDuration();$(".player__duration-estimate").text(formatTime(n)),setInterval(function(){var e=player.getCurrentTime(),t=e/n*100;$(".player__playback-button").css({left:"".concat(t,"%")}),$(".player__duration-completed").text(formatTime(e))},1e3)},onPlayerStateChange=function(e){switch(e.data){case 1:playerContainer.addClass("active"),playerContainer.addClass("paused");break;case 2:playerContainer.removeClass("active"),playerContainer.removeClass("paused")}};function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{height:"405",width:"660",videoId:"LXb3EKWsInQ",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0}})}eventsInit();var slider=$(".slider__list").bxSlider({pager:!1,controls:!1}),findBlockByAlias=($(".products__arrow-left").click(function(e){e.preventDefault(),slider.goToPrevSlide()}),$(".products__arrow-right").click(function(e){e.preventDefault(),slider.goToNextSlide()}),function(n){return console.log(n),$(".review__item").filter(function(e,t){return $(t).attr("data-linked-with")===n})});$(".interactive-avatar__link").click(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.attr("data-open"),t=findBlockByAlias(t),e=e.closest(".reviews__switcher-item");t.addClass("active").siblings().removeClass("active"),e.addClass("interactive-avatar--active").siblings().removeClass("interactive-avatar--active")});